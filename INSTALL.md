<p><a href='javascript:loc=window.location.href,loc.indexOf("www.die2nite.com")!=-1&&loc.indexOf("ghost/ingame")!=-1?(score=0,$("td.days").each(function(){score+=parseInt($(this).text())}),alert(score+" (not including souls)")):alert("Use this on a towns history page");'>Calculate Town Score</a></p>
<p><a href='javascript:total=$("div.bprogress").width(),list=[],CONST=.75,strip=function(e){return e.replace(/^\s+|\s+$/g,"")},ar2int=function(e,t){return parseInt(strip(e[t]))},$("tr.building").each(function(){damage=$(this).children("td.rsc").children("div.damage"),!damage.length==0&&damage.children("div.bprogress").children("div.bbar").width()/total<CONST&&(array=/<em>Status:<\/em>\s+([0-9]+\s+\/\s+[0-9]+)\s+<p>/g.exec(damage.attr("onmouseover"))[1].split("/"),need=ar2int(aray,1)*CONST-ar2int(array,0),list=list.concat([[strip($(this).children("td.name").text()),need]]))}),str="These need repair:\n";for(i=0;i<list.length;i++)str=str+list[i][0]+" needs "+list[i][1]+"\n";alert(str);'>HC Repair Calculator</a></p>
